          "content": "import 'package:flutter/material.dart';\nimport 'package:flutter_riverpod/flutter_riverpod.dart';\nimport 'package:go_router/go_router.dart';\n\nimport '../../../core/supabase_client.dart';\n\n/// Provider for level filter\nfinal wordlistLevelFilterProvider = StateProvider<String?>((ref) => null);\n\n/// Provider for loading all word lists\nfinal wordlistsProvider = FutureProvider<List<Map<String, dynamic>>>((ref) async {\n  final supabase = ref.watch(supabaseClientProvider);\n  final levelFilter = ref.watch(wordlistLevelFilterProvider);\n\n  var query = supabase.from('word_lists').select('id, name, description, level, category');\n\n  if (levelFilter != null) {\n    query = query.eq('level', levelFilter);\n  }\n\n  final response = await query.eq('is_system', true).order('name');\n  return List<Map<String, dynamic>>.from(response);\n});\n\nclass WordlistListScreen extends ConsumerWidget {\n  const WordlistListScreen({super.key});\n\n  static const levels = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2'];\n\n  @override\n  Widget build(BuildContext context, WidgetRef ref) {\n    final wordlistsAsync = ref.watch(wordlistsProvider);\n    final levelFilter = ref.watch(wordlistLevelFilterProvider);\n\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Word Lists'),\n        leading: IconButton(\n          icon: const Icon(Icons.arrow_back),\n          onPressed: () => context.go('/'),\n        ),\n        actions: [\n          FilledButton.icon(\n            onPressed: () => context.go('/wordlists/new'),\n            icon: const Icon(Icons.add, size: 18),\n            label: const Text('New Word List'),\n          ),\n          const SizedBox(width: 16),\n        ],\n      ),\n      body: Column(\n        children: [\n          // Filters\n          Container(\n            padding: const EdgeInsets.all(16),\n            decoration: BoxDecoration(\n              color: Colors.grey.shade50,\n              border: Border(\n                bottom: BorderSide(color: Colors.grey.shade200),\n              ),\n            ),\n            child: Row(\n              children: [\n                // Level filter\n                SizedBox(\n                  width: 150,\n                  child: DropdownButtonFormField<String?>(\n                    value: levelFilter,\n                    decoration: const InputDecoration(\n                      labelText: 'Level',\n                      contentPadding: EdgeInsets.symmetric(horizontal: 12, vertical: 8),\n                      border: OutlineInputBorder(),\n                    ),\n                    items: [\n                      const DropdownMenuItem(value: null, child: Text('All Levels')),\n                      ...levels.map(\n                        (level) => DropdownMenuItem(\n                          value: level,\n                          child: Text(level),\n                        ),\n                      ),\n                    ],\n                    onChanged: (value) {\n                      ref.read(wordlistLevelFilterProvider.notifier).state = value;\n                    },\n                  ),\n                ),\n                const SizedBox(width: 16),\n\n                // Clear filter\n                if (levelFilter != null)\n                  TextButton.icon(\n                    onPressed: () {\n                      ref.read(wordlistLevelFilterProvider.notifier).state = null;\n                    },\n                    icon: const Icon(Icons.clear, size: 18),\n                    label: const Text('Clear'),\n                  ),\n              ],\n            ),\n          ),\n\n          // Word lists\n          Expanded(\n            child: wordlistsAsync.when(\n              data: (wordlists) {\n                if (wordlists.isEmpty) {\n                  return Center(\n                    child: Column(\n                      mainAxisAlignment: MainAxisAlignment.center,\n                      children: [\n                        Icon(\n                          Icons.list_alt,\n                          size: 64,\n                          color: Colors.grey.shade400,\n                        ),\n                        const SizedBox(height: 16),\n                        Text(\n                          'No word lists found',\n                          style: TextStyle(\n                            fontSize: 18,\n                            color: Colors.grey.shade600,\n                          ),\n                        ),\n                        const SizedBox(height: 8),\n                        FilledButton.icon(\n                          onPressed: () => context.go('/wordlists/new'),\n                          icon: const Icon(Icons.add),\n                          label: const Text('Create your first word list'),\n                        ),\n                      ],\n                    ),\n                  );\n                }\n\n                return SingleChildScrollView(\n                  padding: const EdgeInsets.all(24),\n                  child: Table(\n                    columnWidths: const {\n                      0: FlexColumnWidth(2),\n                      1: FlexColumnWidth(3),\n                      2: FlexColumnWidth(1),\n                      3: FlexColumnWidth(1.5),\n                      4: FixedColumnWidth(50),\n                    },\n                    border: TableBorder.all(\n                      color: Colors.grey.shade200,\n                      borderRadius: BorderRadius.circular(8),\n                    ),\n                    children: [\n                      // Header\n                      TableRow(\n                        decoration: BoxDecoration(\n                          color: Colors.grey.shade100,\n                          borderRadius: const BorderRadius.vertical(\n                            top: Radius.circular(8),\n                          ),\n                        ),\n                        children: const [\n                          Padding(\n                            padding: EdgeInsets.all(12),\n                            child: Text(\n                              'Name',\n                              style: TextStyle(fontWeight: FontWeight.bold),\n                            ),\n                          ),\n                          Padding(\n                            padding: EdgeInsets.all(12),\n                            child: Text(\n                              'Description',\n                              style: TextStyle(fontWeight: FontWeight.bold),\n                            ),\n                          ),\n                          Padding(\n                            padding: EdgeInsets.all(12),\n                            child: Text(\n                              'Level',\n                              style: TextStyle(fontWeight: FontWeight.bold),\n                            ),\n                          ),\n                          Padding(\n                            padding: EdgeInsets.all(12),\n                            child: Text(\n                              'Category',\n                              style: TextStyle(fontWeight: FontWeight.bold),\n                            ),\n                          ),\n                          SizedBox(),\n                        ],\n                      ),\n                      // Data rows\n                      ...wordlists.map((wordlist) => TableRow(\n                            children: [\n                              InkWell(\n                                onTap: () => context.go('/wordlists/${wordlist['id']}'),\n                                child: Padding(\n                                  padding: const EdgeInsets.all(12),\n                                  child: Text(\n                                    wordlist['name'] ?? '',\n                                    style: const TextStyle(\n                                      fontWeight: FontWeight.w500,\n                                      color: Color(0xFF4F46E5),\n                                    ),\n                                  ),\n                                ),\n                              ),\n                              Padding(\n                                padding: const EdgeInsets.all(12),\n                                child: Text(\n                                  wordlist['description'] ?? '',\n                                  maxLines: 2,\n                                  overflow: TextOverflow.ellipsis,\n                                  style: TextStyle(color: Colors.grey.shade700),\n                                ),\n                              ),\n                              Padding(\n                                padding: const EdgeInsets.all(12),\n                                child: _LevelBadge(level: wordlist['level'] ?? 'B1'),\n                              ),\n                              Padding(\n                                padding: const EdgeInsets.all(12),\n                                child: Text(\n                                  _formatCategory(wordlist['category'] ?? ''),\n                                  style: TextStyle(\n                                    color: Colors.grey.shade600,\n                                    fontSize: 13,\n                                  ),\n                                ),\n                              ),\n                              InkWell(\n                                onTap: () => context.go('/wordlists/${wordlist['id']}'),\n                                child: const Padding(\n                                  padding: EdgeInsets.all(12),\n                                  child: Icon(\n                                    Icons.chevron_right,\n                                    color: Colors.grey,\n                                  ),\n                                ),\n                              ),\n                            ],\n                          )),\n                    ],\n                  ),\n                );\n              },\n              loading: () => const Center(child: CircularProgressIndicator()),\n              error: (error, _) => Center(\n                child: Column(\n                  mainAxisAlignment: MainAxisAlignment.center,\n                  children: [\n                    Icon(Icons.error_outline, size: 48, color: Colors.red.shade400),\n                    const SizedBox(height: 16),\n                    Text('Error: $error'),\n                    const SizedBox(height: 16),\n                    FilledButton(\n                      onPressed: () => ref.invalidate(wordlistsProvider),\n                      child: const Text('Retry'),\n                    ),\n                  ],\n                ),\n              ),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  String _formatCategory(String category) {\n    return category\n        .split('_')\n        .map((word) => word.isNotEmpty ? '${word[0].toUpperCase()}${word.substring(1)}' : '')\n        .join(' ');\n  }\n}\n\nclass _LevelBadge extends StatelessWidget {\n  const _LevelBadge({required this.level});\n\n  final String level;\n\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 4),\n      decoration: BoxDecoration(\n        color: _getColor().withValues(alpha: 0.1),\n        borderRadius: BorderRadius.circular(4),\n      ),\n      child: Text(\n        level,\n        style: TextStyle(\n          fontSize: 12,\n          color: _getColor(),\n          fontWeight: FontWeight.bold,\n        ),\n      ),\n    );\n  }\n\n  Color _getColor() {\n    switch (level) {\n      case 'A1':\n        return Colors.green;\n      case 'A2':\n        return Colors.lightGreen;\n      case 'B1':\n        return Colors.orange;\n      case 'B2':\n        return Colors.deepOrange;\n      case 'C1':\n        return Colors.red;\n      case 'C2':\n        return Colors.purple;\n      default:\n        return Colors.grey;\n    }\n  }\n}\n"
        },
        "caller": {
          "type": "direct"
        }
      }
    ]
  },
  {
    "role": "user",
    "content": [
      {
        "tool_use_id": "toolu_01RZHZufz1X96TJQdwyQm3uf",
        "type": "tool_result",
        "content": "File created successfully at: /Users/wonderelt/Desktop/readeng_admin/lib/features/wordlists/screens/wordlist_list_screen.dart"
      }
    ]
  },
  {
    "role": "assistant",
    "content": [
      {
        "type": "tool_use",
        "id": "toolu_01JkWz3vbaTRKBy4A9Q97HY9",
        "name": "Write",
        "input": {
          "file_path": "/Users/wonderelt/Desktop/readeng_admin/lib/features/wordlists/screens/wordlist_edit_screen.dart",
